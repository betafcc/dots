#!/usr/bin/env zsh

if [ $# -eq 0 ]; then
    temp_script=$(mktemp -p $PWD -t run)

    trap 'rm -f "$temp_script"' EXIT INT

    cat /dev/stdin >"$temp_script"

    chmod +x "$temp_script"
    "$temp_script"
    exit
else
    case "$1" in
    'python') cat <(printf 'print(') - <(printf ')') | "${HOME}/.pyenv/shims/python" ;;
    'node') cat <(printf 'console.log(') - <(printf ')') | node ;;
    esac
fi
